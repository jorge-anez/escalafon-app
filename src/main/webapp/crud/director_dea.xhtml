<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    
    <body>        
        <ui:composition template="./../plantillas/plantilla.xhtml">
            <ui:define name="right">
                right
            </ui:define>

            <ui:define name="content">              
                <p:panelGrid columns="3" rendered="#{!directorDEABean.render()}">
                   <p:outputLabel value="No Esta asigando un director"/>                   
               </p:panelGrid>
                <h:form id="dir_form">
                <p:panelGrid columns="2"  rendered="#{directorDEABean.render()}">
                    <f:facet name="header">
                        <p:outputLabel value="Datos Director DEA"/>
                   </f:facet>
                   <p:outputLabel value="Nombre:"/>
                   <p:inputText value="#{directorDEABean.dir_dea.nombre}" disabled="true"/>
                   <p:outputLabel value="Apellido:"/>
                   <p:inputText value="#{directorDEABean.dir_dea.apellido}" disabled="true"/>
                   <p:outputLabel value="Cuenta"/>
                   <p:inputText value="#{directorDEABean.dir_dea.cuenta}" disabled="true"/>
                   <p:outputLabel value="Password"/>
                   <p:outputLabel value="**************"/>
                   <p:outputLabel value="Grado Academico:"/>
                   <p:inputText value="#{directorDEABean.dir_dea.docente.gradoAcademico}" disabled="true"/>
                   <p:outputLabel value="Fecha Inicio:"/>
                   <p:inputText value="#{directorDEABean.dir_dea.administradorDirector.fechaInicio}" disabled="true" />
                   <p:outputLabel value="Fecha Fin:"/>
                   <p:inputText value="#{directorDEABean.dir_dea.administradorDirector.fechaFin}" disabled="true"/>
                   <f:facet name="footer">
                       <p:commandButton action="#{directorDEABean.retirarCargo(directorDEABean.dir_dea)}" update="@all" value="Retirar Cargo"/>
                   </f:facet>                   
               </p:panelGrid>  
               </h:form>
                <h:form id="table_form_user" rendered="#{!directorDEABean.render()}" >                
                           <p:dataTable  var="u" value="#{personaBean.users}" rows="5"
                                                  paginator="true"
                                                  paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                  rowsPerPageTemplate="5,10,15"  editable="true" paginatorPosition="bottom" currentPageReportTemplate="{startRecord}-{endRecord}" >


                                <p:column styleClass="leftAlign" headerText="C.I." filterBy="#{u.ci}">                            
                                             <h:outputText value="#{u.ci}" />                                
                                 </p:column>
                               <p:column headerText="Nombre" filterBy="#{u.nombre}">                            
                                             <h:outputText value="#{u.nombre}" />                                
                                 </p:column>
                               <p:column headerText="Apellido" filterBy="#{u.apellido}">                            
                                             <h:outputText value="#{u.apellido}" />                          
                               </p:column>                       
                                 <p:column headerText="Acciones"  style="width: 14% !important;" >   
                                     <p:commandButton icon="ui-icon-search" value="Asignar" title="Asignar Director DEA #{u.nombre}" actionListener="#{directorDEABean.asignarDirDEA(u.ci)}"  update=":table_form_user" oncomplete="PF('var_asignar_dir').show()" />                            
                                 </p:column>                       
                             </p:dataTable>                   
                         </h:form> 
                   
                
                <p:dialog header="Fecha" resizable="true" widgetVar="var_asignar_dir" id="createDialog" closable="false" modal="true" appendTo="@(body)">            
                  <h:form id="asignarForm_dir">
                    <p:panelGrid columns="2" style="width: 100%" columnClasses="rightalign,leftalign"  >
                        <p:column >
                            <h:outputText value="Fecha Inicio:" /> 
                        </p:column>
                         <p:column>
                             <p:calendar  value="#{directorDEABean.fechaInicio}"/>          
                        </p:column>
                        <p:column width="50%">
                            <h:outputText value="Fecha Fin:" /> 
                        </p:column>
                        <p:column>
                            <p:calendar  value="#{directorDEABean.fechaFin}"/>        
                        </p:column>                                                        
                      <f:facet name="footer">
                       <p:commandButton actionListener="#{directorDEABean.asignarDirDEA()}" icon="ui-icon-check" update="@all" value="Aceptar" oncomplete="PF('var_asignar_dir').hide();"></p:commandButton>            
                       <p:button icon="ui-icon-cancel" value="Cancelar"></p:button>
                      </f:facet>
                    </p:panelGrid>                     
                  </h:form>
              </p:dialog> 
                
                        <p:confirmDialog id="id_confirm_dialog" message="Esta seguro de eliminar?" header="Confirmacion" severity="alert" closable="false"   widgetVar="confirm_dialog" appendTo="@(body)">     
                            <h:form id="confirm_form">
                                <p:commandButton value="Si" actionListener="#{personaBean.removeItem()}" update=":table_form_user" oncomplete="PF('confirm_dialog').hide()"/>     
                                <p:commandButton value="No" onclick="PF('confirm_dialog').hide();" type="button" />  
                            </h:form>
                        </p:confirmDialog> 
            
               
             
               
                      
            </ui:define>

        </ui:composition>

    </body>
</html>
