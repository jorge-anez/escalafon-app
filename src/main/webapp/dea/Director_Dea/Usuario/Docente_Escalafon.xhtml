<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body id="bodyUniversidad" >

        <p:growl id="mensajesDeaDirdeaUniacadUniverisdad" showDetail="true" life="3000" />

        <h:outputText value="Universidad " />
        <p:selectOneMenu value="#{universidadBean.siglaUniversidad}" style="width: 300px" >
            <f:selectItem itemLabel="Seleccionar Universidad" itemValue="-" />
            <f:selectItems value="#{universidadBean.listaMap}" var="universidades" itemLabel="#{universidades}" itemValue="#{universidades}" />
            <p:ajax event="change" listener="#{facultadBean.obtenerFacultads}" update=":main:mensajesDeaDirdeaUniacadUniverisdad dataTableUniversidad :main:select_Facultad" />
        </p:selectOneMenu>

        <h:outputText  value="Facultad " />
        <p:selectOneMenu id="select_Facultad" value="#{facultadBean.idFacultad}" style="width: 300px" >
            <f:selectItem itemLabel="Seleccionar Facultad" itemValue="0" />
            <f:selectItems value="#{facultadBean.listaMap}" var="facultades" itemLabel="#{facultades}" itemValue="#{facultades}" />
            <p:ajax event="change" listener="#{carreraBean.obtenerCarreras}" update=":main:mensajesDeaDirdeaUniacadUniverisdad dataTableUniversidad :main:select_Carrera :main:contents" />
        </p:selectOneMenu>

        <h:outputText  value="Carrera " />
        <p:selectOneMenu id="select_Carrera" value="#{carreraBean.idCarrera}" style="width: 300px" >
            <f:selectItem itemLabel="Seleccionar Carrera" itemValue="0" />
            <f:selectItems value="#{carreraBean.listaMap}" var="carreras" itemLabel="#{carreras}" itemValue="#{carreras}" />
            <p:ajax event="change" listener="#{docenteEscalafonBean.obtenerDocenteEscalafons}" update=":main:mensajesDeaDirdeaUniacadUniverisdad dataTableUniversidad :main:contents" />
        </p:selectOneMenu>

        <p:dataTable id="dataTableUniversidad" var="universidad" value="#{docenteEscalafonBean.mylista}" rowKey="#{universidad.ci}" selection="#{docenteEscalafonBean.docenteEscalafonBeanSeleccionado}" selectionMode="single" filteredValue="#{docenteEscalafonBean.filtroDocenteEscalafonBeans}" paginator="true" rows="10" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,15" editable="true" >
            <f:facet name="header" >
                Usuarios Docente Escalafon
            </f:facet>

            <p:ajax event="rowEdit" listener="#{docenteEscalafonBean.onEdit}" update=":main:mensajesDeaDirdeaUniacadUniverisdad" />

            <p:ajax event="rowEditCancel" listener="#{docenteEscalafonBean.onCancel}" update=":main:mensajesDeaDirdeaUniacadUniverisdad" />

            <p:column headerText="" style="width: 4%" >
                <p:commandButton action="#{docenteEscalafonBean.cargarMaterias}" id="selectButton" update=":main:dialog_requisito_materia :main:mensajesDeaDirdeaUniacadUniverisdad :main:tabView:editResolucion" oncomplete="crearRequisitoMateriaDlg.show()" icon="ui-icon-search" title="Ver" >
                    <f:setPropertyActionListener value="#{universidad}" target="#{docenteEscalafonBean.docenteEscalafonBeanSeleccionado}" />
                </p:commandButton>
            </p:column>

            <p:column headerText="C.I." sortBy="ci" filterBy="ci" >
                <p:cellEditor>
                    <f:facet name="output" >
                        <h:outputText value="#{universidad.ci}" />
                    </f:facet>
                    <f:facet name="input" >
                        <p:inputText value="#{universidad.ci}" style="width: 100%" disabled="true" />
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Nombre"  sortBy="nombreCompleto" filterBy="nombreCompleto">
                <p:cellEditor>
                    <f:facet name="output" >
                        <h:outputText value="#{universidad.docenteBean.nombreCompleto}" />
                    </f:facet>
                    <f:facet name="input" >
                        <p:inputText value="#{universidad.docenteBean.nombreCompleto}" style="width: 100%" disabled="true" />
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Fecha Nacimiento"  sortBy="fechaNacimiento" >
                <p:cellEditor>
                    <f:facet name="output" >
                        <h:outputText value="#{universidad.fechaNacimiento}" >
                            <f:convertDateTime pattern="dd/MM/yyyy" />
                        </h:outputText>
                    </f:facet>
                    <f:facet name="input" >
                        <p:calendar value="#{universidad.fechaNacimiento}" showOn="button" pattern="dd/MM/yyyy" />
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Correo Electronico"  sortBy="correoElectronico" filterBy="correoElectronico" >
                <p:cellEditor>
                    <f:facet name="output" >
                        <h:outputText value="#{universidad.correoElectronico}" />
                    </f:facet>
                    <f:facet name="input" >
                        <p:inputText value="#{universidad.correoElectronico}" style="width: 100%" />
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Tipo"  sortBy="tipo" filterBy="tipo" >
                <p:cellEditor>
                    <f:facet name="output" >
                        <h:outputText value="#{universidad.tipo}" />
                    </f:facet>
                    <f:facet name="input" >
                        <p:inputText value="#{universidad.tipo}" style="width: 100%" />
                    </f:facet>
                </p:cellEditor>
            </p:column>


            <p:column style="width: 6%">
                <p:rowEditor />
            </p:column>

        </p:dataTable>

        <h:panelGrid columns="2" cellpadding="5" >
            <p:commandButton id="crearUniversidad" value="Nuevo Registro" onclick="crearUniversidadDlg.show();" type="button" />
        </h:panelGrid>

        <p:dialog id="id_crearUniversidad" header="Crear Docente Escalafon" widgetVar="crearUniversidadDlg" showEffect="explode" resizable="false" width="500" >
            <h:panelGrid columns="3" style="margin-bottom: 10px" >
                <h:outputLabel value="C.I." />
                <h:inputText value="#{docenteEscalafonBean.ci}" required="true" />
                <p:commandButton id="buscarDirectorDEA" actionListener="#{docenteEscalafonBean.obtenerDocente}" update=":main:contents :main:mensajesDeaDirdeaUniacadUniverisdad" icon="ui-icon-search" title="Buscar Director DEA" />
            </h:panelGrid>
            <h:panelGrid id="contents" columns="3" style="margin-bottom: 10px" >                

                <h:outputLabel value="Nombre Completo" />
                <h:inputText value="#{docenteEscalafonBean.nombre}" style="width: 300px" />
                <h:outputLabel value="  " />

                <h:outputLabel value="Fecha Naciento" />
                <p:calendar value="#{docenteEscalafonBean.fechaNacimiento}" showOn="button" pattern="dd/MM/yyyy" />
                <h:outputLabel value="  " />

                <h:outputLabel value="Email" />
                <h:inputText value="#{docenteEscalafonBean.correoElectronico}" style="width: 300px"  />
                <h:outputLabel value="  " />

                <h:outputLabel value="Tipo" />
                <h:inputText value="#{docenteEscalafonBean.tipo}" style="width: 300px"  />
                <h:outputLabel value="  " />

                <h:outputText  value="Carrera " />
                <p:selectOneMenu value="#{docenteEscalafonBean.idCarrera}" style="width: 300px" disabled="true" >
                    <f:selectItem itemLabel="Seleccionar Carrera" itemValue="0" />
                    <f:selectItems value="#{carreraBean.listaMap}" var="carreras" itemLabel="#{carreras}" itemValue="#{carreras}" />
                </p:selectOneMenu>

            </h:panelGrid>

            <h:outputLabel value="  " />
            <p:commandButton value="Crear"  actionListener="#{docenteEscalafonBean.crearDocenteEscalafon}" update="dataTableUniversidad mensajesDeaDirdeaUniacadUniverisdad main" oncomplete="crearUniversidadDlg.hide()" />
        </p:dialog>

        <p:dialog id="dialog_requisito_materia" header="Materia" widgetVar="crearRequisitoMateriaDlg" showEffect="explode" width="840" height="480" >
            Gestion 
            <p:selectOneMenu value="#{docenteEscalafonBean.gestion}" style="width: 300px" >
                <f:selectItem itemLabel="200" itemValue="200" />
                <f:selectItems value="#{docenteEscalafonBean.listaGestion}" var="universidades" itemLabel="#{universidades}" itemValue="#{universidades}" />
                <p:ajax event="change" listener="#{docenteEscalafonBean.cargarMaterias}" update=":main:mensajesDeaDirdeaUniacadUniverisdad :main:tabView :main:tabView:editResolucion" />
            </p:selectOneMenu>

            <p:tabView id="tabView" >
                <p:tab title="Materias" >
                    <p:dataTable id="dataTableMateriasDoc" var="materiasDoc" value="#{docenteEscalafonBean.listRelacionDocenteMateriaBeans}" paginator="true" rows="10" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,15" editable="true" >
                        <f:facet name="header" >
                            Usuarios Docente Escalafon
                        </f:facet>

                        <p:ajax event="rowEdit" listener="#{docenteEscalafonBean.onEditNota}" update=":main:mensajesDeaDirdeaUniacadUniverisdad" />

                        <p:ajax event="rowEditCancel" listener="#{docenteEscalafonBean.onCancelNota}" update=":main:mensajesDeaDirdeaUniacadUniverisdad" />

                        <p:column headerText="Sigla" >
                            <p:cellEditor>
                                <f:facet name="output" >
                                    <h:outputText value="#{materiasDoc.materiaBean.siglaMateria}" />
                                </f:facet>
                                <f:facet name="input" >
                                    <p:inputText value="#{materiasDoc.materiaBean.siglaMateria}" style="width: 100%" disabled="true" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>

                        <p:column headerText="Nombre" >
                            <p:cellEditor>
                                <f:facet name="output" >
                                    <h:outputText value="#{materiasDoc.materiaBean.nombre}" />
                                </f:facet>
                                <f:facet name="input" >
                                    <p:inputText value="#{materiasDoc.materiaBean.nombre}" style="width: 100%" disabled="true" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>

                        <p:column headerText="Paralelo" >
                            <p:cellEditor>
                                <f:facet name="output" >
                                    <h:outputText value="#{materiasDoc.paralelo}" />
                                </f:facet>
                                <f:facet name="input" >
                                    <p:inputText value="#{materiasDoc.paralelo}" style="width: 100%" disabled="true" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>

                        <p:column headerText="Nota" >
                            <p:cellEditor>
                                <f:facet name="output" >
                                    <h:outputText value="#{materiasDoc.evaluacionBean.nota}" />
                                </f:facet>
                                <f:facet name="input" >
                                    <p:inputText value="#{materiasDoc.evaluacionBean.nota}" style="width: 100%" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>

                        <p:column style="width: 6%">
                            <p:rowEditor />
                        </p:column>

                    </p:dataTable>
                </p:tab>
                <p:tab title="Nota Escalafon" >
                    <p:panelGrid columns="1">
                        <h:outputText value="Nota: " /> 
                        <p:inputText value="observacion" style="width: 400%" disabled="true" />
                        <h:outputText value="Aviso" /> 
                        <h:outputText value="" /> 

                        <p:selectOneMenu value="#{docenteEscalafonBean.selectTipoEv}" style="width: 300px" >
                            <f:selectItem itemLabel="Seleccionar Tipo Evaluacion" itemValue="" />
                            <f:selectItem itemLabel="Actualizar_Cartilla_Ev_Docente" itemValue="Actualizar_Cartilla_Ev_Docente" />
                            <f:selectItem itemLabel="Actualizar_Cartilla_Ev_Contratado" itemValue="Actualizar_Cartilla_Ev_Contratado" />
                            <f:selectItem itemLabel="Actualizar_Cartilla_Ev_Ingreso" itemValue="Actualizar_Cartilla_Ev_Ingreso" />
                            <f:selectItem itemLabel="Actualizar_Cartilla_Ev_Emerito" itemValue="Actualizar_Cartilla_Ev_Emerito" />
                            <f:selectItem itemLabel="Actualizar_Cartilla_Ev_Fed_Rep_Nota" itemValue="Actualizar_Cartilla_Ev_Fed_Rep_Nota" />
                            <f:selectItem itemLabel="Actualizar_Cartilla_Ev_Aut_Rep_Nota" itemValue="Actualizar_Cartilla_Ev_Aut_Rep_Nota" />
                            <f:selectItem itemLabel="Actualizar_Cartilla_Ev_Fed_Car_Nota" itemValue="Actualizar_Cartilla_Ev_Fed_Car_Nota" />
                            <f:selectItem itemLabel="Actualizar_Cartilla_Ev_Aut_Car_Nota" itemValue="Actualizar_Cartilla_Ev_Aut_Car_Nota" />                        
                            <p:ajax event="change" listener="#{docenteEscalafonBean.cargarEE}" update=":main:tabView:conte" />
                        </p:selectOneMenu>
                        <h:outputText value="" /> 

                        <p:panel id="conte">
                            <h:outputText value="Cargo" rendered="#{docenteEscalafonBean.selectTipoEvEdit}" />
                            <h:inputText  value="#{docenteEscalafonBean.evaluacionEscalafonBeanActualizar.cargo}" rendered="#{docenteEscalafonBean.selectTipoEvEdit}" style="width: 300px" />
                            <b/>

                            <h:outputText value="Lugar" rendered="#{docenteEscalafonBean.selectTipoEvEdit}" />
                            <h:inputText value="#{docenteEscalafonBean.evaluacionEscalafonBeanActualizar.lugar}" rendered="#{docenteEscalafonBean.selectTipoEvEdit}" style="width: 300px" />
                            <b/>

                            <h:outputText value="Nota" rendered="#{docenteEscalafonBean.selectTipoEvEdit}" />
                            <h:inputText value="#{docenteEscalafonBean.evaluacionEscalafonBeanActualizar.nota}" rendered="#{docenteEscalafonBean.selectTipoEvEdit}" style="width: 300px" />
                        </p:panel>

                        <p:commandButton actionListener="#{docenteEscalafonBean.evaluar}" update=":main:mensajesDeaDirdeaUniacadUniverisdad :main:tabView" value="Evaluar" />
                    </p:panelGrid>


                </p:tab>
                <p:tab title="Resolucion" >
                    <p:panelGrid columns="1">
                        <h:outputText value="Resolucion " /> 
                        <p:editor id="editResolucion" value="#{docenteEscalafonBean.resolucionBeanObtenido.contenido}" />
                        <p:commandButton actionListener="#{docenteEscalafonBean.actualizar_contenido_Resolucion}" update=":main:mensajesDeaDirdeaUniacadUniverisdad :main:tabView" value="Guardar" />
                    </p:panelGrid>
                </p:tab>
                <p:tab title="Cartilla y Escalafon" >
                    <p:panelGrid columns="1">
                        <p:panelGrid columns="2">
                            <p:commandButton icon="ui-icon-arrowrefresh-1-w" action="#{docenteEscalafonBean.Actualizar_Cartilla_Refresh}" />
                            <p:commandButton icon="ui-icon-print"></p:commandButton>
                        </p:panelGrid>
                        <h:outputText value="" /> 
                        <h:outputText value="DIRECCION DE EVALUACION Y ACREDITACION" /> 
                        <p:panelGrid columns="5">
                            <h:outputText value="Carrera: " /> 
                            <h:outputText value="#{docenteEscalafonBean.cbObtenido.nombre}" /> 
                            <h:outputText value=" " /> 
                            <h:outputText value="Gestion:" /> 
                            <h:outputText value="#{docenteEscalafonBean.gestion}" /> 

                            <h:outputText value="Facultad: " /> 
                            <h:outputText value="#{docenteEscalafonBean.fbObtenido.nombre}" /> 
                            <h:outputText value=" " /> 
                            <h:outputText value="Categoria:" /> 
                            <h:outputText value="#{docenteEscalafonBean.escalafonBeanObtenido.categoria}" /> 

                            <h:outputText value="Universidad: " /> 
                            <h:outputText value="#{docenteEscalafonBean.ubObtenido.nombre}" /> 
                            <h:outputText value=" " /> 
                            <h:outputText value=" " /> 
                            <h:outputText value=" " /> 
                        </p:panelGrid>
                        <p:panelGrid columns="2"  >
                            <p:dataTable var="contenidoCartilla" value="#{docenteEscalafonBean.contenidoCartillaBeansObtenido}" >
                                <p:column headerText="Sigla">
                                    <h:outputText value="#{contenidoCartilla.siglaMateria}" />
                                </p:column>

                                <p:column headerText="Materia">
                                    <h:outputText value="#{contenidoCartilla.nombreMateria}" />
                                </p:column>

                                <p:column headerText="Paralelo">
                                    <h:outputText value="#{contenidoCartilla.paralelo}" />
                                </p:column>

                                <p:column headerText="Carga Horaria">
                                    <h:outputText value="#{contenidoCartilla.cargaHoraria}" />
                                </p:column>

                                <p:column headerText="Puntaje de Evaqluacion">
                                    <h:outputText value="#{contenidoCartilla.puntajeEvaluacion}" />
                                </p:column>

                                <p:column headerText="Parcial">
                                    <h:outputText value="#{contenidoCartilla.puntajeParcial}" />
                                </p:column>

                            </p:dataTable>
                            <p:dataTable var="esca" value="#{docenteEscalafonBean.escalafonBeansObtenido}" >
                                <f:facet name="header" >
                                    Historial
                                </f:facet>

                                <p:column headerText="Gestion">
                                    <h:outputText value="#{esca.gestion}" />
                                </p:column>
                                
                                <p:column headerText="Ev.">
                                    <h:outputText value="#{esca.puntaje}" />
                                </p:column>
                                
                                <p:column headerText="Puntj.">
                                    <h:outputText value="#{esca.puntajeAcumulado}" />
                                </p:column>
                                
                            </p:dataTable>
                        </p:panelGrid>
                    </p:panelGrid>
                </p:tab>
            </p:tabView>
        </p:dialog>

        <script type="text/javascript">
                function anularKey(e) {
                    e.keyCode = 0;
                }
        </script>


    </h:body>
</html>